name: Sign Language Pipeline

on:
  push:
    branches: [ "main" ]
  pull_request:

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout código
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Instalar dependências
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Testar import do modelo e inferência simples
        run: |
          python -c "import torch; print('Torch version:', torch.__version__)"
          # Exemplo: só validar que modelo carrega
          python scripts/plot_confusion.py || echo 'Sem matriz de confusão ainda'

  # (Opcional) Treino — cuidado com o tempo
  #train-model:
    #runs-on: ubuntu-latest
    #needs: build-and-test
    #if: github.event_name == 'workflow_dispatch'  # só roda manualmente
    #steps:
      #- uses: actions/checkout@v3
      #- uses: actions/setup-python@v4
        #with:
          #python-version: "3.10"
      #- run: |
          #pip install -r requirements.txt
          #python scripts/train_sign_alphabet.py --epochs 1  # só 1 época para validar
